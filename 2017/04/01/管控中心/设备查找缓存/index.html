<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.0 -->
    <script>
        window.materialVersion = "1.5.0"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">














    <!-- Title -->
    
    <title>
        
            设备查找缓存 | 
        
        cxf&#39;s blog
    </title>

    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="format-detection" content="telephone=no"/>
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="treachery">
    <meta name="description" itemprop="description" content="那一天我二十一岁，在我一生的黄金时代。我有好多奢望。我想爱，想吃，还想在一瞬间变成天上半明半暗的云。后来我才知道，生活就是个缓慢受锤的过程，人一天天老下去，奢望也一天天消失，最后变得像挨了锤的牛一样。可是我过二十一岁生日时没有预见到这一点。我觉得自己会永远生猛下去，什么也锤不了我。">
    <meta name="keywords" content="treachery, blog, hexo, Web, 博客,管控中心">

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(key){try{localStorage.removeItem(key)}catch(e){}};lsloader.setLS=function(key,val){try{localStorage.setItem(key,val)}catch(e){}};lsloader.getLS=function(key){var val="";try{val=localStorage.getItem(key)}catch(e){val=""}return val};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var keys=[];for(var i=0;i<localStorage.length;i++){keys.push(localStorage.key(i))}keys.forEach(function(key){var data=lsloader.getLS(key);if(window.oldVersion){var remove=window.oldVersion.reduce(function(p,c){return p||data.indexOf("/*"+c+"*/")!==-1},false);if(remove){lsloader.removeLS(key)}}})}catch(e){}};lsloader.clean();lsloader.load=function(jsname,jspath,cssonload,isJs){if(typeof cssonload==="boolean"){isJs=cssonload;cssonload=undefined}isJs=isJs||false;cssonload=cssonload||function(){};var code;code=this.getLS(jsname);if(code&&code.indexOf(versionString)===-1){this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload,isJs);return}if(code){var versionNumber=code.split(versionString)[0];if(versionNumber!=jspath){console.log("reload:"+jspath);this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload,isJs);return}code=code.split(versionString)[1];if(isJs){this.jsRunSequence.push({name:jsname,code:code});this.runjs(jspath,jsname,code)}else{document.getElementById(jsname).appendChild(document.createTextNode(code));cssonload()}}else{this.requestResource(jsname,jspath,cssonload,isJs)}};lsloader.requestResource=function(name,path,cssonload,isJs){var that=this;if(isJs){this.iojs(path,name,function(path,name,code){that.setLS(name,path+versionString+code);that.runjs(path,name,code)})}else{this.iocss(path,name,function(code){document.getElementById(name).appendChild(document.createTextNode(code));that.setLS(name,path+versionString+code)},cssonload)}};lsloader.iojs=function(path,jsname,callback){var that=this;that.jsRunSequence.push({name:jsname,code:""});try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(path,jsname,xhr.response);return}}that.jsfallback(path,jsname)}};xhr.send(null)}catch(e){that.jsfallback(path,jsname)}};lsloader.iocss=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.iofonts=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.runjs=function(path,name,code){if(!!name&&!!code){for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code=code}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var script=document.createElement("script");script.appendChild(document.createTextNode(this.jsRunSequence[0].code));script.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(script);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var that=this;var script=document.createElement("script");script.src=this.jsRunSequence[0].path;script.type="text/javascript";this.jsRunSequence[0].status="loading";script.onload=function(){that.jsRunSequence.shift();if(that.jsRunSequence.length>0){that.runjs()}};document.body.appendChild(script)}};lsloader.tagLoad=function(path,name){this.jsRunSequence.push({name:name,code:"",path:path,status:"failed"});this.runjs()};lsloader.jsfallback=function(path,name){if(!!this.jsnamemap[name]){return}else{this.jsnamemap[name]=name}for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code="";this.jsRunSequence[k].status="failed";this.jsRunSequence[k].path=path}}this.runjs()};lsloader.cssfallback=function(path,name,cssonload){if(!!this.cssnamemap[name]){return}else{this.cssnamemap[name]=1}var link=document.createElement("link");link.type="text/css";link.href=path;link.rel="stylesheet";link.onload=link.onerror=cssonload;var root=document.getElementsByTagName("script")[0];root.parentNode.insertBefore(link,root)};lsloader.runInlineScript=function(scriptId,codeId){var code=document.getElementById(codeId).innerText;this.jsRunSequence.push({name:scriptId,code:code});this.runjs()};lsloader.loadCombo=function(jslist){var updateList="";var requestingModules={};for(var k in jslist){var LS=this.getLS(jslist[k].name);if(!!LS){var version=LS.split(versionString)[0];var code=LS.split(versionString)[1]}else{var version=""}if(version==jslist[k].path){this.jsRunSequence.push({name:jslist[k].name,code:code,path:jslist[k].path})}else{this.jsRunSequence.push({name:jslist[k].name,code:null,path:jslist[k].path,status:"comboloading"});requestingModules[jslist[k].name]=true;updateList+=(updateList==""?"":";")+jslist[k].path}}var that=this;if(!!updateList){var xhr=new XMLHttpRequest;xhr.open("get",combo+updateList,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){that.runCombo(xhr.response,requestingModules);return}}else{for(var i in that.jsRunSequence){if(requestingModules[that.jsRunSequence[i].name]){that.jsRunSequence[i].status="failed"}}that.runjs()}}};xhr.send(null)}this.runjs()};lsloader.runCombo=function(comboCode,requestingModules){comboCode=comboCode.split("/*combojs*/");comboCode.shift();for(var k in this.jsRunSequence){if(!!requestingModules[this.jsRunSequence[k].name]&&!!comboCode[0]){this.jsRunSequence[k].status="comboJS";this.jsRunSequence[k].code=comboCode[0];this.setLS(this.jsRunSequence[k].name,this.jsRunSequence[k].path+versionString+comboCode[0]);comboCode.shift()}}this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.jpeg">
    <link rel="icon" sizes="192x192" href="/img/favicon.jpeg">
    <link rel="apple-touch-icon" href="/img/favicon.jpeg">

    <!--iOS -->
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="cxf&#39;s blog">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    
        
            <link rel=alternate type="application/atom+xml" href="atom.xml">
        
    

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?MKetZV3cUTfDxvMffaOezg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/css/prettify/github-v2.min.css?AfzKxt++K+/lhZBlSjnxwg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-image: url(http://img.netbian.com/file/2017/1225/cec912f837e957d14c4083819f1fc628.jpg);
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <style>
        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 300;
            src: local('Roboto Light'), local('Roboto-Light'), url('https://cdnjs.cat.net/ajax/libs/mdui/0.2.1/fonts/roboto/Roboto-Light.woff2') format('woff2'), url('https://cdnjs.cat.net/ajax/libs/mdui/0.2.1/fonts/roboto/Roboto-Light.woff') format('woff');
        }
        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 300;
            src: local('Roboto LightItalic'), local('Roboto-LightItalic'), url('https://cdnjs.cat.net/ajax/libs/mdui/0.2.1/fonts/roboto/Roboto-LightItalic.woff2') format('woff2'), url('https://cdnjs.cat.net/ajax/libs/mdui/0.2.1/fonts/roboto/Roboto-LightItalic.woff') format('woff');
          }
        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 400;
            src: local('Roboto Regular'), local('Roboto-Regular'), url('https://cdnjs.cat.net/ajax/libs/mdui/0.2.1/fonts/roboto/Roboto-Regular.woff2') format('woff2'), url('https://cdnjs.cat.net/ajax/libs/mdui/0.2.1/fonts/roboto/Roboto-Regular.woff') format('woff');
        }
        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 400;
            src: local('Roboto RegularItalic'), local('Roboto-RegularItalic'), url('https://cdnjs.cat.net/ajax/libs/mdui/0.2.1/fonts/roboto/Roboto-RegularItalic.woff2') format('woff2'), url('https://cdnjs.cat.net/ajax/libs/mdui/0.2.1/fonts/roboto/Roboto-RegularItalic.woff') format('woff');
          }
        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 500;
            src: local('Roboto Medium'), local('Roboto-Medium'), url('https://cdnjs.cat.net/ajax/libs/mdui/0.2.1/fonts/roboto/Roboto-Medium.woff2') format('woff2'), url('https://cdnjs.cat.net/ajax/libs/mdui/0.2.1/fonts/roboto/Roboto-Medium.woff') format('woff');
        }
        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 500;
            src: local('Roboto MediumItalic'), local('Roboto-MediumItalic'), url('https://cdnjs.cat.net/ajax/libs/mdui/0.2.1/fonts/roboto/Roboto-MediumItalic.woff2') format('woff2'), url('https://cdnjs.cat.net/ajax/libs/mdui/0.2.1/fonts/roboto/Roboto-MediumItalic.woff') format('woff');
        }
        @font-face {
            font-family: 'Material Icons';
            font-style: normal;
            font-weight: 400;
            src: local('Material Icons'),
            local('MaterialIcons-Regular'),
            url(https://cdnjs.cat.net/ajax/libs/material-design-icons/3.0.1/iconfont/MaterialIcons-Regular.woff2) format('woff2'),
            url(https://cdnjs.cat.net/ajax/libs/material-design-icons/3.0.1/iconfont/MaterialIcons-Regular.woff) format('woff'),
            url(https://cdnjs.cat.net/ajax/libs/material-design-icons/3.0.1/iconfont/MaterialIcons-Regular.ttf) format('truetype');
        }
    </style>


<!-- Import Material Icon -->





    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://treachery.github.io">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="设备查找缓存 | cxf&#39;s blog">
    <meta property="og:image" content="http://treachery.github.io/img/favicon.jpeg" />
    <meta property="og:description" content="那一天我二十一岁，在我一生的黄金时代。我有好多奢望。我想爱，想吃，还想在一瞬间变成天上半明半暗的云。后来我才知道，生活就是个缓慢受锤的过程，人一天天老下去，奢望也一天天消失，最后变得像挨了锤的牛一样。可是我过二十一岁生日时没有预见到这一点。我觉得自己会永远生猛下去，什么也锤不了我。">
    <meta property="og:article:tag" content="管控中心"> 

    
        <meta property="article:published_time" content="Sat Apr 01 2017 09:33:34 GMT+0800" />
        <meta property="article:modified_time" content="Fri Dec 29 2017 00:01:20 GMT+0800" />
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:title" content="设备查找缓存 | cxf&#39;s blog">
    <meta name="twitter:description" content="那一天我二十一岁，在我一生的黄金时代。我有好多奢望。我想爱，想吃，还想在一瞬间变成天上半明半暗的云。后来我才知道，生活就是个缓慢受锤的过程，人一天天老下去，奢望也一天天消失，最后变得像挨了锤的牛一样。可是我过二十一岁生日时没有预见到这一点。我觉得自己会永远生猛下去，什么也锤不了我。">
    <meta name="twitter:image" content="http://treachery.github.io/img/favicon.jpeg">
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="http://treachery.github.io" />

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://treachery.github.io/2017/04/01/管控中心/设备查找缓存/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://treachery.github.io/2017/04/01/管控中心/设备查找缓存/index.html",
    "headline": "设备查找缓存",
    "datePublished": "Sat Apr 01 2017 09:33:34 GMT+0800",
    "dateModified": "Fri Dec 29 2017 00:01:20 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "treachery",
        "image": {
            "@type": "ImageObject",
            "url": "http://ww2.sinaimg.cn/large/7f318987jw1f72m7gv450j205k05kmx1.jpg"
        },
        "description": "那一天我二十一岁，在我一生的黄金时代。我有好多奢望。我想爱，想吃，还想在一瞬间变成天上半明半暗的云。后来我才知道，生活就是个缓慢受锤的过程，人一天天老下去，奢望也一天天消失，最后变得像挨了锤的牛一样。可是我过二十一岁生日时没有预见到这一点。我觉得自己会永远生猛下去，什么也锤不了我。"
    },
    "publisher": {
        "@type": "Organization",
        "name": "cxf&#39;s blog",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.jpeg"
        }
    },
    "keywords": ",管控中心treachery, blog, hexo, Web, 博客",
    "description": "那一天我二十一岁，在我一生的黄金时代。我有好多奢望。我想爱，想吃，还想在一瞬间变成天上半明半暗的云。后来我才知道，生活就是个缓慢受锤的过程，人一天天老下去，奢望也一天天消失，最后变得像挨了锤的牛一样。可是我过二十一岁生日时没有预见到这一点。我觉得自己会永远生猛下去，什么也锤不了我。",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#修改记录"><span class="post-toc-number">1.</span> <span class="post-toc-text"><a href="#&#x4FEE;&#x6539;&#x8BB0;&#x5F55;" class="headerlink" title="&#x4FEE;&#x6539;&#x8BB0;&#x5F55;"></a>&#x4FEE;&#x6539;&#x8BB0;&#x5F55;</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#hashCache"><span class="post-toc-number">1.1.</span> <span class="post-toc-text"><a href="#hashCache" class="headerlink" title="hashCache"></a>hashCache</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#扫描缓存队列"><span class="post-toc-number">1.2.</span> <span class="post-toc-text"><a href="#&#x626B;&#x63CF;&#x7F13;&#x5B58;&#x961F;&#x5217;" class="headerlink" title="&#x626B;&#x63CF;&#x7F13;&#x5B58;&#x961F;&#x5217;"></a>&#x626B;&#x63CF;&#x7F13;&#x5B58;&#x961F;&#x5217;</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#开关机缓存"><span class="post-toc-number">1.3.</span> <span class="post-toc-text"><a href="#&#x5F00;&#x5173;&#x673A;&#x7F13;&#x5B58;" class="headerlink" title="&#x5F00;&#x5173;&#x673A;&#x7F13;&#x5B58;"></a>&#x5F00;&#x5173;&#x673A;&#x7F13;&#x5B58;</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#PING扫描"><span class="post-toc-number">1.4.</span> <span class="post-toc-text"><a href="#PING&#x626B;&#x63CF;" class="headerlink" title="PING&#x626B;&#x63CF;"></a>PING&#x626B;&#x63CF;</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#其他改动"><span class="post-toc-number">1.5.</span> <span class="post-toc-text"><a href="#&#x5176;&#x4ED6;&#x6539;&#x52A8;" class="headerlink" title="&#x5176;&#x4ED6;&#x6539;&#x52A8;"></a>&#x5176;&#x4ED6;&#x6539;&#x52A8;</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#功能添加"><span class="post-toc-number">1.6.</span> <span class="post-toc-text"><a href="#&#x529F;&#x80FD;&#x6DFB;&#x52A0;" class="headerlink" title="&#x529F;&#x80FD;&#x6DFB;&#x52A0;"></a>&#x529F;&#x80FD;&#x6DFB;&#x52A0;</span></a></li></ol></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                设备查找缓存
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="http://ww2.sinaimg.cn/large/7f318987jw1f72m7gv450j205k05kmx1.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>treachery</strong>
        <span>4月 01, 2017</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">devices other</i>
    <span class="visuallyhidden">devices other</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
    <li class="mdl-menu__item">在其它设备中阅读本文章</li>
    
        <img src="https://pan.baidu.com/share/qrcode?w=246&h=246&url=http://treachery.github.io/2017/04/01/管控中心/设备查找缓存/">
    
</ul>

    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/管控中心/">管控中心</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=设备查找缓存&url=http://treachery.github.io/2017/04/01/管控中心/设备查找缓存/index.html&pic=http://treachery.github.io/img/favicon.jpeg&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=设备查找缓存&url=http://treachery.github.io/2017/04/01/管控中心/设备查找缓存/index.html&via=treachery" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://treachery.github.io/2017/04/01/管控中心/设备查找缓存/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://treachery.github.io/2017/04/01/管控中心/设备查找缓存/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h1 id="修改记录"><a href="#修改记录" class="headerlink" title="修改记录"></a>修改记录</h1><h2 id="hashCache"><a href="#hashCache" class="headerlink" title="hashCache"></a>hashCache</h2><ol>
<li><p>设计逻辑<br>设备入库慢的最主要原因是设备在sqlite里面的查找慢，尤其涉及到partlike的逻辑时，基本是一个O(n)的复杂度，需要遍历整个设备表进行比对。</p>
</li>
<li><p>实现原理<br>在sqlite3里面对设备表Devices的ip和mac字段添加增删改触发器，触发器将ip，mac的变更以ip-&gt;idlist,mac-&gt;idlist存储到hash表。这样设备在查询时，先在hashCache查询到id，再去设备表按照id提取相应表值。</p>
</li>
<li><p>实现方法</p>
</li>
</ol>
<p>增删改触发器</p>
<pre><code>    //设备插入触发器
sqlTriggerInsert := `create TRIGGER DevicesInsert AFTER INSERT on Devices
    begin
        select ondeviceinsert(new.id,new.ip);
        select ondeviceinsert(new.id,new.mac);
    end;`

        _, err = this.pSqliteDB.Exec(sqlTriggerInsert)
        if err != nil {
            return err
        }
    //设备更新触发器
sqlTriggerUpdate := `create TRIGGER DevicesUpdate UPDATE OF ip,mac on Devices
    begin
        select ondevicedelete(new.id,old.ip);
        select ondevicedelete(new.id,old.mac);
        select ondeviceinsert(new.id,new.ip);
        select ondeviceinsert(new.id,new.mac);
    end;`

        _, err = this.pSqliteDB.Exec(sqlTriggerUpdate)
        if err != nil {
            return err
        }
    //设备删除触发器
sqlTriggerDelete := `create TRIGGER DevicesDelete AFTER DELETE on Devices
    begin
        select ondevicedelete(old.id,old.ip);
        select ondevicedelete(old.id,old.mac);
    end;`

        _, err = this.pSqliteDB.Exec(sqlTriggerDelete)
</code></pre><ol>
<li>增加触发器<br>在hashCache里面按照ip,mac为key找相应idlist，如果没有找到直接插入一条新的。<br>如果找到了，需要按照二分查找在相应位置把新的id做插入。<pre><code>func (dh *deviceHashCache) OnDeviceInsert(id int, ipmac string) int {
 //映射里面要全部拆分成单ip，单mac
 for _, one := range strings.Split(ipmac, &quot;;&quot;) { 
     if len(one) &gt; 0 {
         reslist := insert2sortedslice(id, dh.findidlist(one, false))
         dh.muxMapIPMacid.Lock()
         dh.mapIPMacidlist[one] = reslist
         dh.muxMapIPMacid.Unlock()
     }
 }
 return 1
}
</code></pre></li>
<li>删除触发器</li>
</ol>
<p>同理，按照ip，mac在hashCache里面查找，找到记录后按照二分查找法将对于id删除</p>
<pre><code>//OnDeviceDelete 设备删除触发器
func (dh *deviceHashCache) OnDeviceDelete(id int, ipmac string) int {
    dh.muxMapIPMacid.Lock()
    defer dh.muxMapIPMacid.Unlock()
    //映射里面要全部拆分成单ip，单mac
    for _, one := range strings.Split(ipmac, &quot;;&quot;) { 
        if len(one) &gt; 0 {
            if idlist, ok := dh.mapIPMacidlist[one]; ok {
                length := len(idlist)
                //只有一个，直接将key删除掉
                if length &lt;= 1 { 
                    delete(dh.mapIPMacidlist, one)
                } else { //有多个，将idlist替换掉
                    var newidlist []int
                    loc := binarySearch4find(idlist, id, 0, length-1)
                    if loc == 0 { //删头部
                        newidlist = idlist[1:]
                    } else if loc &gt; 0 {
                        newidlist = append(idlist[:loc-1], idlist[loc:]...)
                    }
                    if len(newidlist) &gt; 0 {
                        dh.mapIPMacidlist[one] = newidlist
                    }
                }
            }
        }
    }
    return 1
}
</code></pre><ol>
<li>修改触发器</li>
</ol>
<p>先调用删除触发器，再调用增加触发器</p>
<h2 id="扫描缓存队列"><a href="#扫描缓存队列" class="headerlink" title="扫描缓存队列"></a>扫描缓存队列</h2><p>1.设计逻辑<br>对同一条设备，由于扫描来源有多种，所以简单地FIFO队列会导致同一设备的不同属性需要分多次入库，加重了设备入库负担。(<strong><em>比如交换机采集上报了portid，portname等，类型识别上报OSdetail,HardwareCode,ping扫描上报了开机状态</em></strong>)，所以我们需要按照ip_mac为key的方法，将不同来源上报设备在缓存队列里面合并。</p>
<p>2.实现原理</p>
<ul>
<li>新设备上报上来，根据ip_mac在缓存队列生成一个item，3个key。key1=ip_mac,key2=ip,key3=mac(<strong><em>多ip，多mac设备就会有多个ip，mac的key。只有ip上报的设备就只有ipkey</em></strong>)</li>
<li>每条设备上报时的处理</li>
</ul>
<ol>
<li>如果同时有ip和mac，则以ip_mac为key在缓存hash表查找，找到item1后判断每个字段是否发生变更，如果有变更，则要将item1的序号发送到入库队列。 然后在按照ip为key查找，找到后将指针指向item1；再按照mac查找，找到后也将指针指向item1，并且要判断mac的指针是否发生变化，如果变化了，同样将item1的序号发送到入库队列</li>
<li><p>如果只有ip上报，则以ip为key查找，找到后判断item是否更新，更新了则加入到入库队列</p>
</li>
<li><p>入库队列取出一条item时，同时要更新扫描来源item.stype和item.Status</p>
</li>
</ol>
<p>3.实现方法</p>
<p>添加缓存项</p>
<pre><code>func (this *scanResultManager) addCache(ip string, mac string, item tagCommonItem) {
    this.arrResultCache = append(this.arrResultCache, item)
    id := len(this.arrResultCache) - 1
    if !common.IsEmpty_MAC(mac) {
        this.mapResultCache[ip+&quot;_&quot;+mac] = id
        this.mapResultCache[mac] = id
    }
    this.mapResultCache[ip] = id
    this.addtochan(id)
}
</code></pre><p>修改缓存项</p>
<pre><code>func (this *scanResultManager) modifyCache(inx int, ip, mac string, item tagCommonItem) {
    muxItem.Lock()
    defer muxItem.Unlock()
    if len(this.arrResultCache) &lt;= inx {
        return
    }
    olditem := this.arrResultCache[inx]
    if !strings.Contains(olditem.Stype, item.Stype) { //添加扫描类型
        olditem.Stype += &quot;;&quot; + item.Stype
    }
    //用新值覆盖旧值
    newElem := reflect.ValueOf(&amp;item).Elem()
    oldElems := reflect.ValueOf(&amp;olditem).Elem()
    /*
        stype，ip，mac三个值不在此更新
    */
    for i := 3; i &lt; oldElems.NumField(); i++ {
        mField := oldElems.Field(i)
        if !mField.CanSet() {
            continue
        }
        if mField.Kind() == reflect.Int {
            newvalue := newElem.Field(i).Int()
            if newvalue != 0 &amp;&amp; newvalue != mField.Int() {
                mField.SetInt(newvalue)
                this.addtochan(inx)
                olditem.UpdateState = 0
            }
        }
        if mField.Kind() == reflect.String {
            newvalue := newElem.Field(i).String()
            if newvalue != &quot;&quot; &amp;&amp; newvalue != mField.String() {
                mField.SetString(newvalue)
                this.addtochan(inx)
                olditem.UpdateState = 0
            }
        }
    }

    //是否发生ip替换，mac指针抢占
    if oldinx, ok := this.mapResultCache[mac]; ok &amp;&amp; oldinx != inx {
        this.addtochan(inx)
    }
    this.arrResultCache[inx] = olditem
}
</code></pre><p>查找设置缓存</p>
<pre><code>func (this *scanResultManager) seachAndSetCache(ip string, mac string, item tagCommonItem) {
    this.muxmapResultCache.Lock()
    defer this.muxmapResultCache.Unlock()
    find := false
    inx := -1
    key := &quot;&quot;
    if common.IsEmpty_MAC(mac) {
        key = ip
    } else {
        key = ip + &quot;_&quot; + mac
    }

    if inx, find = this.mapResultCache[key]; find { //ip和mac都匹配了
        goto SETCACHE
    }
SETCACHE:
    if find &amp;&amp; inx &gt;= 0 { //找到了进行补全
        this.modifyCache(inx, ip, mac, item)
    } else { //不匹配，添加一条
        this.addCache(ip, mac, item)
    }
}
</code></pre><h2 id="开关机缓存"><a href="#开关机缓存" class="headerlink" title="开关机缓存"></a>开关机缓存</h2><ol>
<li><p>设计逻辑<br>对于已经入库到设备表的ip，管控中心为了维护其开关机状态，需要定期使用ping扫描扫这些ip(<strong><em>关机心跳扫描每3分钟一次，开机扫描每12分钟一次</em></strong>)，这会导致大量ping上来的设备堆积到扫描入库缓存，并且某些设备既然已经堆积了，就没必要去ping它。</p>
</li>
<li><p>实现原理</p>
</li>
</ol>
<ul>
<li>关机心跳扫描每一轮时，把待ping设备ip,id取出来，将那些ip不重复的单ip设备加入到一个hash表，存储为map(ip-&gt;id)(<strong><em>多ip设备，或者ip有重复的设备还是要走扫描缓存队列，因为有些逻辑要判断</em></strong>)。ping扫描回复一批扫描结果时，将结果在map(ip-&gt;id)里面过滤，如果在hash表里面的，将其取出来，直接按id更新该设备的心跳周期和更新时间。剩下的再加入到扫描缓存队列。</li>
<li>开机扫描取设备ip时，将ip在入库缓存队列里面过滤，如果该ip已经在入库缓存队列等待设备开机了，就取出这个ip，不需要ping它了。</li>
</ul>
<ol>
<li>实现方法</li>
</ol>
<p>关机心跳探测</p>
<pre><code>func (this *deviceCache) pingDevice() {
    this.resetipmap()
    iplist := []string{}
    sqlite_getipip := &quot;select id,ip,count(*) as c from devices where sysPowerOffTestCount&gt;0 group by ip&quot; //单ip并且不和其他设备重复的，记录下id来，直接进行状态更新
    _, tb, err := this.Query(sqlite_getipip)
    if err != nil {
        return
    }
    for _, rows := range tb {
        count, _ := strconv.Atoi(rows[2])
        if count &lt;= 0 {
            continue
        }
        iplist = append(iplist, rows[1])
        if !strings.Contains(rows[1], &quot;;&quot;) &amp;&amp; count == 1 { //将id记录下来，用于快速更新
            this.addtoipmap(rows[1], rows[0])
        }
    }
    if len(iplist) &gt; 0 {
        face.GetPingServer().AddtoPingList(strings.Join(iplist, &quot;;&quot;))
    }
}
</code></pre><p>ping回复ip列表过滤</p>
<pre><code>func (this *deviceCache) FilterIp(iplist string) []string {
    arrips := strings.Split(iplist, &quot;;&quot;)
    arrnewips := []string{}
    strids := &quot;&quot;
    for _, ip := range arrips {
        this.muxMapIpId.RLock()
        if id, ok := this.mapipid[ip]; ok { //设备心跳探测返回了,快速重置计数
            if len(strids) == 0 {
                strids += id
            } else {
                strids += &quot;,&quot; + id
            }
        } else { //不是心跳探测返回的设备，让其走正常的设备入库流程
            arrnewips = append(arrnewips, ip)
        }
        this.muxMapIpId.RUnlock()
    }
    this.multiSetPowerHeartBeat(strids)
    return arrnewips
}
</code></pre><p>开机探测</p>
<pre><code>if count%SECOND_CHECK_HEART_BEAT*4 == 0 {
    _, tab, _ := gDeviceCache.Query(&quot;select ip from devices where devicestatus&amp;1!=1&quot;)
    tmpiplist := bytes.NewBuffer(nil)
    //需要进行开机探测设备太多,怕探不过来状态不准确,加长心跳延时
    if len(tab) &gt; 1000 { 
                this.calculatePingSec(len(tab))
    }
    for _, row := range tab {
        ip := row[0]
        //该ip有开机探测还没入库，直接跳过
        if gScanManager.TestIpInCache(ip) { 
            continue
        }
        if tmpiplist.Len() == 0 {
            tmpiplist.WriteString(ip)
        } else {
            tmpiplist.WriteString(&quot;;&quot; + ip)
        }
    }

    if common.GetCrc(tmpiplist.String()) != this.devcrc {
        this.devcrc = common.GetCrc(tmpiplist.String())
        this.pingCore.SetDevices(tmpiplist.String())
    }
}
</code></pre><h2 id="PING扫描"><a href="#PING扫描" class="headerlink" title="PING扫描"></a>PING扫描</h2><ol>
<li>设计逻辑<br>之前版本是多线程（<strong><em>goroutines</em></strong>）发送，即同时取一批设备(<strong><em>256个</em></strong>)，然后开256个线程将其发送出去，这样的好处是比较灵活，我们可以记录每个ip发送的icmp序列号，在接收端做校验，也可以在每个线程做定时器，记录每个ip的发送和接收间隔时间。但是在设备数量比较大的情况下，比如我们需要维护20000设备的开关机，那么每一轮(<strong><em>10s</em></strong>)至少需要进行1000个ip的发送和接收(<strong><em>排除掉重复发送和其他出来延时，这已经是最低要求</em></strong>)。在cpu空闲的时候还好，在cpu比较繁忙时(<strong><em>被资产识别组件，交换机采集组件，数据库占用</em></strong>)，就可能出现线程调度不到，出现大量发送超时。<br>修改版本使用单线程发送，单线程接收(C++版本现在也是这样的逻辑)，一次性读取足够数量ip（<strong><em>现在默认10000个，不够10000就读万</em></strong>），将其全部加入icmp发送缓存。接收端不做序列号验证，也不做超时判断，只要接收到的ip，就全部作为ping通的设备回调给扫描缓存。</li>
</ol>
<h2 id="其他改动"><a href="#其他改动" class="headerlink" title="其他改动"></a>其他改动</h2><ol>
<li>数据库驱动替换 commdb-&gt;commdb2(<strong><em>自动数据库驱动以及策略加解密的动态链接库</em></strong>)，对数据库连接池做了些设置</li>
<li>编译使用golang1.8，之前测试发现golang1.8对比golang1.7,在sqlite3性能测试时大概有10%-20%提升</li>
<li></li>
</ol>
<h2 id="功能添加"><a href="#功能添加" class="headerlink" title="功能添加"></a>功能添加</h2><ol>
<li>CMDToDBXMl添加(<strong><em>暂时没用到的功能</em></strong>)</li>
<li>准入系统添加了几个功能（安全登录身份认证，安全检查上报0x41）</li>
<li>主机监控系统添加了些日志(cpu，内存告警等等)</li>
<li>检查系统添加了些日志</li>
</ol>

        
                <blockquote style="margin: 2em 0 0;padding: 0.5em 1em;border-left: 3px solid #F44336;background-color: #F5F5F5;list-style: none;">
                    <p><strong>
                         
                            本文采用 <a rel='nofollow noopener' href='https://creativecommons.org/licenses/by-nc-sa/3.0/deed.zh' target='_blank'>CC BY-NC-SA 3.0 Unported</a> 协议进行许可，阅读 <a href='/creativecommons.html' target='_blank'>相关说明</a>
                        </strong>
                        <br>
                        <strong>本文链接：</strong><a href="http://treachery.github.io/2017/04/01/管控中心/设备查找缓存/">http://treachery.github.io/2017/04/01/管控中心/设备查找缓存/</a>
                    </p>
                </blockquote>
        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 DISQUS -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://treachery.github.io/2017/04/01/管控中心/设备查找缓存/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://treachery.github.io/2017/04/01/管控中心/设备查找缓存/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>
<script type="text/ls-javascript" id="disqus-thread-script">
    queue.offer(function() {
            (function() { // DON'T EDIT BELOW THIS LINE
                var d = document;
                var s = d.createElement('script');
                s.src = '//https-janebt-github-io.disqus.com/embed.js';
                s.setAttribute('data-timestamp', + new Date());
                (d.head || d.body).appendChild(s);
            })();
        });
</script>

</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2017/07/21/管控中心/文件句柄数/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2016/07/11/Hexo/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.jpg);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="http://ww2.sinaimg.cn/large/7f318987jw1f72m7gv450j205k05kmx1.jpg" alt="treachery's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        526377874@qq.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto:526377874@qq.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2017/12/">十二月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/11/">十一月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/10/">十月 2017<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/09/">九月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/07/">七月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/07/">七月 2016<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">apps</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/golang/">golang<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/golang相关/">golang相关<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/博客栈/">博客栈<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/简历/">简历<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/管控中心/">管控中心<span class="sidebar_archives-count">5</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags.html" title="标签">
                
                    <i class="material-icons sidebar-material-icons">bookmark</i>
                
                标签
            </a>
        </li>
        
    
        <li>
            <a href="/timeline.html" title="时间线">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                时间线
            </a>
        </li>
        
            <li class="divider"></li>
        
    
        <li>
            <a href="/gallery.html" title="映像">
                
                    <i class="material-icons sidebar-material-icons">photo</i>
                
                映像
            </a>
        </li>
        
    
        <li>
            <a href="/links.html" title="友链">
                
                    <i class="material-icons sidebar-material-icons">people</i>
                
                友链
            </a>
        </li>
        
            <li class="divider"></li>
        
    
        <li>
            <a href="/about.html" title="简历">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                简历
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">14</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/treachery" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;2016&nbsp;-<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>cxf's blog
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>









   <!-- 使用 DISQUS js 代码 -->
<script id="dsq-count-scr" src="//https-janebt-github-io.disqus.com/count.js" async></script>





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.0 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
